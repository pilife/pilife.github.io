<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en,zh-Hans,default">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/atom.xml" title="YouShouldKnow" type="application/atom+xml">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2">






<meta property="og:type" content="website">
<meta property="og:title" content="YouShouldKnow">
<meta property="og:url" content="http://blog.youshouldknow.tech/index.html">
<meta property="og:site_name" content="YouShouldKnow">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="YouShouldKnow">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blog.youshouldknow.tech/">





  <title>YouShouldKnow</title>
  














</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">YouShouldKnow</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">The world is wonderful, you should know more</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2020/01/04/Calcite源码阅读笔记/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/04/Calcite源码阅读笔记/" itemprop="url">Calcite源码阅读笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-04T23:26:12+08:00">
                2020-01-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/query-optimizer/" itemprop="url" rel="index">
                    <span itemprop="name">query optimizer</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Step1-Calcite的基本逻辑（from-csv-example）"><a href="#Step1-Calcite的基本逻辑（from-csv-example）" class="headerlink" title="Step1: Calcite的基本逻辑（from csv example）"></a>Step1: Calcite的基本逻辑（from csv example）</h2><blockquote>
<p>Premise:</p>
<ul>
<li>官网的tutorial看完，了解了适配csv需要编写的基本逻辑</li>
<li>熟悉volcano/cascades查询优化框架原理</li>
<li>熟悉calcite中基本的阶段(parse, validate, optimize, execute)</li>
</ul>
</blockquote>
<p>从官方的CSV example的测试用例入手，学习基本的运行逻辑</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Filter that can be partly handled by CsvFilterableTable. */</span></span><br><span class="line"><span class="meta">@Test</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFilterableWhere2</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> String sql = <span class="string">"select empno, gender, name from EMPS\n"</span></span><br><span class="line">      + <span class="string">" where gender = 'F' and empno &gt; 125"</span>;</span><br><span class="line">  sql(<span class="string">"filterable-model"</span>, sql)</span><br><span class="line">      .returns(<span class="string">"EMPNO=130; GENDER=F; NAME=Alice"</span>).ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查询语句非常简单，就是从EMPS表中读取数据，使用的model也很简单：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0"</span>,</span><br><span class="line">  <span class="attr">"defaultSchema"</span>: <span class="string">"SALES"</span>,</span><br><span class="line">  <span class="attr">"schemas"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"SALES"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"custom"</span>,</span><br><span class="line">      <span class="attr">"factory"</span>: <span class="string">"org.apache.calcite.adapter.csv.CsvSchemaFactory"</span>,</span><br><span class="line">      <span class="attr">"operand"</span>: &#123;</span><br><span class="line">        <span class="attr">"directory"</span>: <span class="string">"sales"</span>,</span><br><span class="line">        <span class="attr">"flavor"</span>: <span class="string">"FILTERABLE"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时，提出几个疑问：</p>
<ol>
<li>sql字符串中的’EMPS’字符串是在什么时候以及如何转换成对应的Table的？</li>
<li>CsvSchemaFactory在其中参与了什么？串联了哪些自定义的组件？</li>
</ol>
<p>带着以上两个疑问，通过断点的方式，去查看calcite代码实现。</p>
<blockquote>
<p>Tips: 除了debug，可以测试用例中故意构造一些 Case，观察其异常栈。比如故意构造不存在字段，来看validate是如何实现的</p>
</blockquote>
<p>首先我们会注意到<strong>第一个核心类#方法</strong>：</p>
<blockquote>
<p> <code>org.apache.calcite.jdbc.CalciteMetaImpl#prepareAndExecute</code></p>
</blockquote>
<p>顾名思义，这个方法完成了所有准备阶段的工作以及最后的执行工作。要了解整个具体的流程细节是不现实的，这里我根据输入仅仅为model和sql，而model是为了sql服务的，决定跟踪sql（关系代数）在代码内的表示形式（数据结构），了解它是如何变化的，从而解决以上的两个问题。</p>
<p>准备阶段表达关系代数的数据结构：</p>
<ul>
<li><p><code>org.apache.calcite.sql.SqlNode</code></p>
</li>
<li><p><code>org.apache.calcite.rel.RelNode</code></p>
</li>
</ul>
<p>执行阶段表达关系代数的数据结构：</p>
<ul>
<li><code>org.apache.calcite.interpreter.Node</code></li>
</ul>
<hr>
<h4 id="下面分别从数据结构变化的几个阶段来讲述实现细节："><a href="#下面分别从数据结构变化的几个阶段来讲述实现细节：" class="headerlink" title="下面分别从数据结构变化的几个阶段来讲述实现细节："></a>下面分别从数据结构变化的几个阶段来讲述实现细节：</h4><h5 id="String-gt-SqlNode"><a href="#String-gt-SqlNode" class="headerlink" title="String -&gt; SqlNode:"></a>String -&gt; SqlNode:</h5><p>通过JavaCC解析SQL，转化成AST即SqlNode</p>
<h5 id="SqlNode-gt-RelNode"><a href="#SqlNode-gt-RelNode" class="headerlink" title="SqlNode -&gt; RelNode:"></a>SqlNode -&gt; RelNode:</h5><ol>
<li>通过validate进行AST中各个组成部分的检查</li>
</ol>
<ol start="2">
<li>通过parseQuery进行SqlNode转化成RelNode</li>
</ol>
<ol start="3">
<li><p>通过optimize进行RelNode的transform和implement</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Optimizes a query plan.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> root Root of relational expression tree</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> materializations Tables known to be populated with a given query</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> lattices Lattices</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> an equivalent optimized relational expression</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> RelRoot <span class="title">optimize</span><span class="params">(RelRoot root,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">final</span> List&lt;Materialization&gt; materializations,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">final</span> List&lt;CalciteSchema.LatticeEntry&gt; lattices)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> RelOptPlanner planner = root.rel.getCluster().getPlanner();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> DataContext dataContext = context.getDataContext();</span><br><span class="line">  planner.setExecutor(<span class="keyword">new</span> RexExecutorImpl(dataContext));</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//此处省略materialization和lattice相关的代码</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> RelTraitSet desiredTraits = getDesiredRootTraitSet(root);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> RelVisitor visitor = <span class="keyword">new</span> RelVisitor() &#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(RelNode node, <span class="keyword">int</span> ordinal, RelNode parent)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (node <span class="keyword">instanceof</span> TableScan) &#123;</span><br><span class="line">        <span class="keyword">final</span> RelOptCluster cluster = node.getCluster();</span><br><span class="line">        <span class="keyword">final</span> RelOptTable.ToRelContext context =</span><br><span class="line">            ViewExpanders.simpleContext(cluster);</span><br><span class="line">        <span class="keyword">final</span> RelNode r = node.getTable().toRel(context);</span><br><span class="line">        planner.registerClass(r);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">super</span>.visit(node, ordinal, parent);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  visitor.go(root.rel);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> Program program = getProgram();</span><br><span class="line">  <span class="keyword">final</span> RelNode rootRel4 = program.run(</span><br><span class="line">      planner, root.rel, desiredTraits, materializationList, latticeList);</span><br><span class="line">  <span class="keyword">if</span> (LOGGER.isDebugEnabled()) &#123;</span><br><span class="line">    LOGGER.debug(<span class="string">"Plan after physical tweaks: &#123;&#125;"</span>,</span><br><span class="line">        RelOptUtil.toString(rootRel4, SqlExplainLevel.ALL_ATTRIBUTES));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> root.withRel(rootRel4);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ul>
<li><p>visitor.go</p>
<p>此处的访问者模式，在重写的visit方法中利用super.visit访问子元素进行树的遍历。下面是super.visit以及RelNode的accept方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Visits a node during a traversal.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> node    Node to visit</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ordinal Ordinal of node within its parent</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> parent  Parent of the node, or null if it is the root of the</span></span><br><span class="line"><span class="comment"> *                traversal</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">    RelNode node,</span></span></span><br><span class="line"><span class="function"><span class="params">    <span class="keyword">int</span> ordinal,</span></span></span><br><span class="line"><span class="function"><span class="params">    RelNode parent)</span> </span>&#123;</span><br><span class="line">  node.childrenAccept(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">childrenAccept</span><span class="params">(RelVisitor visitor)</span> </span>&#123;</span><br><span class="line">  visitor.visit(input, <span class="number">0</span>, <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由此也可以看出，这里遍历是为了找TableScan元素，然后注册对应的RelNode，<em>不过不清楚这边为啥要重新toRel生成？debug了下并没有变化，而且还少了rowType的信息</em>。下面是register的逻辑，主要是有新的RelNode之后，进行相关class的注册以及规则的添加到planner中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerClass</span><span class="params">(RelNode node)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> Class&lt;? extends RelNode&gt; clazz = node.getClass();</span><br><span class="line">  <span class="keyword">if</span> (classes.add(clazz)) &#123;</span><br><span class="line">    onNewClass(node);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (RelTrait trait : node.getTraitSet()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (traits.add(trait)) &#123;</span><br><span class="line">      trait.register(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>program.run</p>
</li>
<li><p>Root.withRel</p>
</li>
</ul>
<h5 id="RelNode-gt-Bindable"><a href="#RelNode-gt-Bindable" class="headerlink" title="RelNode -&gt; Bindable:"></a>RelNode -&gt; Bindable:</h5><h2 id="Step2-如何在此基础上实现平台间数据迁移"><a href="#Step2-如何在此基础上实现平台间数据迁移" class="headerlink" title="Step2: 如何在此基础上实现平台间数据迁移"></a>Step2: 如何在此基础上实现平台间数据迁移</h2><h2 id="Step3-如何做到跨平台的Join-Reorder"><a href="#Step3-如何做到跨平台的Join-Reorder" class="headerlink" title="Step3: 如何做到跨平台的Join Reorder"></a>Step3: 如何做到跨平台的Join Reorder</h2><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h2><ol>
<li>官网教程:  <a href="https://calcite.apache.org/docs/index.html" target="_blank" rel="noopener">https://calcite.apache.org/docs/index.html</a></li>
<li>Calcite简介：<a href="https://www.slideshare.net/JordanHalterman/introduction-to-apache-calcite" target="_blank" rel="noopener">https://www.slideshare.net/JordanHalterman/introduction-to-apache-calcite</a></li>
<li>Cascades / Volcano: <a href="https://15721.courses.cs.cmu.edu/spring2019/papers/22-optimizer1/xu-columbia-thesis1998.pdf" target="_blank" rel="noopener">https://15721.courses.cs.cmu.edu/spring2019/papers/22-optimizer1/xu-columbia-thesis1998.pdf</a></li>
<li>数据库CMU课程：<a href="https://15721.courses.cs.cmu.edu/spring2019/schedule.html" target="_blank" rel="noopener">https://15721.courses.cs.cmu.edu/spring2019/schedule.html</a></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/09/25/2019秋招总结和自省/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/09/25/2019秋招总结和自省/" itemprop="url">2019秋招总结和自省</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-09-25T18:33:37+08:00">
                2019-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/成长/" itemprop="url" rel="index">
                    <span itemprop="name">成长</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>秋招即将结束了，国内的大厂基本都已经面完了，还剩下一些外企没有面完。感觉自己已经渐渐从秋招的状态中走出来了，为了避免忘记，因此写了这篇博客，用来记录自己的秋招经历，以及对此次秋招的一些总结和反省。</p>
<p>文章会分为以下两个部分：</p>
<ol>
<li>整个秋招的回顾</li>
<li>收获以及不足</li>
</ol>
<h4 id="Part1-秋招回顾"><a href="#Part1-秋招回顾" class="headerlink" title="Part1: 秋招回顾"></a>Part1: 秋招回顾</h4><p>首先列出目前面的公司以及拿到意向书的时间：</p>
<table>
<thead>
<tr>
<th>公司</th>
<th>时间</th>
</tr>
</thead>
<tbody>
<tr>
<td>TP-Link</td>
<td>6.27</td>
</tr>
<tr>
<td>华为星（ssp）</td>
<td>7.24</td>
</tr>
<tr>
<td>腾讯TEG（ssp）</td>
<td>8.23</td>
</tr>
<tr>
<td>网易游戏伏羲（sp）</td>
<td>8.30</td>
</tr>
<tr>
<td>阿里云（a-sp）</td>
<td>9.24</td>
</tr>
<tr>
<td>拼多多大数据</td>
<td>10.9</td>
</tr>
</tbody>
</table>
<p>这次秋招的时间线拉的很长，实事上可以说从春招我就开始有意识的准备了。早期的思路比较简单，先挑肯定需要花长时间复习才有效果的内容开始复习。</p>
<p>于是从三月份开始就开始刷leetcode了，顺带着去学习之前一知半解的知识点。当时也会去看一些前辈的博客学习关于如何复习的以及一些知识点的整理和总结。在四月份的时候，我结合之前看的博客以及和小伙伴的交流，自己归纳了一个复习知识点的框架，然后往里面填东西。</p>
<blockquote>
<p><a href="https://github.com/pilife/knowledge-review" target="_blank" rel="noopener">https://github.com/pilife/knowledge-review</a></p>
</blockquote>
<p>接下来，我的复习主线就分为两个，刷题和知识点的学习。</p>
<p><strong>在刷题方面</strong>，我主要就是刷leetcode，我刷的方法是开始直接顺序刷，大约刷了120题左右，开始按类别刷，按类别刷了50题左右。这里我按类别刷主要是通过Google专门对女生的Program上的题目列表以及自己笔试的时候发现不足找相关类的题目刷。</p>
<p>说一点自己刷题的心得，可能不是每个人都适用。我是龟速刷的坚定代表者，这里的龟速刷是指尽量不看答案，给自己思考的时间会比较长，一题大概半个小时的思考时间我都是可以接受的（完全没有思路大约理性分析个10分钟，确认自己真的目前完全没有思路就会去看答案）。然后看答案也分几种，一种是大约扫一下关键词，知道这题的关键方法，比如iterator, heap等等。然后继续思考。。。一般这种提示出来之后会略微又一些思路。如果10分钟仍然想不出来，就会去看完整的答案。这样做的效果是，能够真切的体会到自己为什么没有想到。自己的思路哪里出了问题没有想到。这一点在总结和归纳各类解题方法的时候非常有用，能够清楚的知道每一题的特点从而导致使用什么样的解题方法。</p>
<p><strong>关于知识点复习</strong>，我的学习路线分为两条。<u>一条是复习零散的知识点</u>，这一块我的方式是由点到面。从一个小的知识点，会发现很多盲区，根据重要程度来确定是不是要去继续探索。<u>另一条是系统地复习</u>，比如说复习JAVA，系统的学习了《深入理解JVM》这本书。在系统学习的过程中也不能盲目顺着看。一般书的前几节会比较精彩，引人入胜。看到后面需要自己对自己提问，找到自己的兴趣点，然后查目录找到对应的地方进行学习，这样主动式的提出问题，在书中找到解答会很高效。</p>
<blockquote>
<p>知识点复习书籍：《深入理解JVM》,《DDIA》,《CSAPP》</p>
</blockquote>
<p>上面说了一些复习的心得，干脆把<strong>面试准备的心得</strong>也一并说了。首先是简历的准备，简历我用的是wondercv，在这之前我捣鼓了很多模版，有md的，有latex的，最后发现还是第三方提供的整套服务爽，自动一页纸，中英文简历，自动排序···总之果断买了会员。简历的撰写其实现在各种前辈总结的很好，主要是突出自己的工作重点，突出工作效果，以及故意暴露一些考点引诱面试官哈哈哈～然后面试的时候注意突出自己贡献以及效果，以及提到之前准备的考点。接下来就看面试官了，问到之前复习过的考点自然是好，没有问到或者问到自己准备的知识点盲区则也是宝贵的经验，面完赶快恶补，因为面试官问的问题一般都是经典的有价值的问题。面试最后可以咨询下求职部门的发展情况，数据的量级以及增长，主要业务是什么，以及对自己未来职业发展上的建议。这些都是很宝贵的，因为一般面到后面都是大佬，能够和大佬交流这些的机会很珍贵。</p>
<p>以上就是我的复习和面试的一些经验。我复习的时间大概是三月到五月，期间在华泰证券实习。当时正好也是春招的时间，投了腾讯，阿里的实习生，当时才开始复习，全都是一面挂。不过<u>当时的探索给我之后确定复习的方向很大的帮助</u>。之后六月到八月在头条实习，复习基本都是靠中午吃饭，晚上下班和周末挤出的时间。期间整个人都是打鸡血的。头条的实习不光是增加了实习经历这么简单，包括认识了很棒的伙伴，接触了工业界的内部平台，参加了toB的项目。给我的认知带来了非常大的改变，非常感谢头条，也感谢那个<u>勇于尝试新环境，勇于挑战的自己</u>。</p>
<p>下面按时间顺序聊一些各个公司的感受吧（仅限于我面试的部门和职位）。</p>
<ul>
<li>TP-LINK：报名的提前批。面试官应该不是搞大数据的，中规中矩，有点久远记不清了。</li>
<li>华为：报名的华为星计划<ul>
<li>一面一堆题目里选，手写题目，真‘手写’，题目很简单，我选了个难一些的解决了，和面试官探讨了下错误和正确的思路，整个过程很愉快。</li>
<li>二面基本在问我的素质，偏HR面。然后笔试+测评（测评挂了一次- -!）。</li>
</ul>
</li>
<li>腾讯：报的我女票计算所的定向招聘。哈哈哈，我也算半个计算所的人。<ul>
<li>一面电话面，面试官瞅着很年轻，问了些分布式相关的概念。有没有答上来了，比如zab，回去恶补。</li>
<li>二面面试官很特别，很有水平，问了我一些自己的见解和抽象。比如JVM的理解，垃圾回收的理解。真的很棒。考数据结构算法非常灵活，聊到哪算哪，最后特定情况下快排的稳定性的分析我脑抽还答错了（题目是我自己挖的坑- -），大写的尴尬。</li>
<li>三面面试官一开始很冷峻，气场很足，前面问了我Hbase的WAL优化我没有答上来，内心大写的不妙。后期问了两个问题，一个分桶的大数据题真的是我灵光乍现想出来的（之后恶补了这类题目）。最后算法不难，很快就写出来了。最后聊天阶段面试官竟然露出了和善的微笑。（瑟瑟发抖，好怕笑着说再见）</li>
</ul>
</li>
<li>网易：报名的提前批<ul>
<li>一面聊了很多JAVA的常用类底层实现。</li>
<li>二面时间很短，聊了常用的设计模式。</li>
<li>三面聊了一些想法，也考了一些linux的基本使用。特别的，三面面试官柏叔超级nice，特地又花了一个小时给我详细讲解了他们部门的情况。</li>
</ul>
</li>
<li>阿里：师兄内推<ul>
<li>一面是师兄的leader，师兄说这个跪了就和阿里再见了。。贼紧张，我记得当时等的时候手心都是汗。面起来之后就好了，聊了一些项目，做了三题不难的算法，聊了会儿LSM。</li>
<li>二面面试官考了一个几何题，当时通过特例想到了一丢丢思路，结果走岔了。考了一题24点。</li>
<li>三面面试官是部门大Boss。聊了很多他们部门做的东西，做了一题通配符匹配的题目。答的很一般，不是最优解。</li>
<li>交叉面面试官和腾讯二面面试官一样给我很深的印象。首先考了我一题很有意思的题目，是隐含的数列题。正解是斐波那契额数列。我一顿分析，把题目抽象成数列题，只答出来等比数列对应的解。忘了斐波那契通项公式。之后又问了我发人深省的问题，你觉得自己做的什么你最自豪？最后给了我一些未来工作上的建议，要找有价值的东西做。收获满满。</li>
</ul>
</li>
<li>pdd：学霸批。我可能是最菜的学霸批。<ul>
<li>一面视频面。问了我一些大数据相关系统的基本问题，spark shuffle，hbase以及一些具体场景的使用。问了跳表的优点，关于方便并行化这一点没有答上来。最后交流了部门的情况。</li>
<li>二面视频面，面试官上来考了正则匹配，10min写出来。我思路局限在之前写过的通配符匹配上了，没有转过弯来，转过来的时候已经过了一半时间了。。勉强写了关键的判断和递归。然后考了我hbase的原理以及hdfs的实现，这边有一些没有答上来比如hbase compact/split细节，hdfs快照原理以及存储问题。然后问了我一些自我认知。</li>
</ul>
</li>
</ul>
<h4 id="Part2-收获及不足"><a href="#Part2-收获及不足" class="headerlink" title="Part2: 收获及不足"></a>Part2: 收获及不足</h4><p>从三月到九月，半年的时间。这半年，有过迷茫，有过开心，有过失落。走过来发现这一路收获了很多，也有很多东西没有做到最好。</p>
<ul>
<li>首先，我最大的收获就是在头条实习的3个月，有眼界的提升，有认知的丰富，当然，还有体重的飙升:)。。总之非常感谢这段经历，nice的环境，nice的同事，给了我一个小小的蜕变。</li>
<li>其次是学会制定计划。可能说出来有些可笑，之前的我从来没有给自己认认真真的制定过系统的计划，最多就是一些短期的规划。这半年里，我第一次以半年为单位进行计划，包括了找工作，毕设，兴趣学习三个方面。以长期计划作为导向，激励自己，每当我觉得要放松的时候，这些计划总能给我神奇的力量。接着就是短期计划，也就是每一天，每一周要完成什么。两者结合，让我能够安稳地走在路上。</li>
<li>还有就是学习方式的不断改进。不断去思考改进自己的学习模式，总结出了非常适合我自己，以自我发掘兴趣为敲门砖的学习方法。辅助以一些帮助进入学习状态的手段（我用的是forest这个app），可以维持自己学习状态。</li>
<li>养成了日记的习惯，每天的规划以及收获会简短记录，回顾时知道自己每天没有白过，从而正向的激励自己。其实这个习惯是在头条实习的时候，每周需要总结周报，每个月需要自己提交考勤。得比较详细的记录了自己的工作。当我开始记之后，忽然发现原来每天做一个总结是非常自然且舒服的事情。</li>
<li>而且这段时间的学习，也加固了我技术上的根基。</li>
<li>坚持了半年每天背英语单词。</li>
</ul>
<p>以上就是收获了，虽然比较满意，但是其中还存在着很多的不足。</p>
<ul>
<li>最大的问题就是睡眠问题！习惯性熬夜。从而早上失去了很多时间和效率。</li>
<li>其次是偶尔的松懈问题，有时候太过放松，让自己处于一个不健康的状态，比如打一天的游戏。（但是隐形守护者是真的香- -||）</li>
<li>还有制定计划并不科学，很多短期计划设置的并不合理，很多计划并没有完成，导致自己暂时性的丧气/放松</li>
</ul>
<p>这些不足和问题，前两者已经养成习惯了，最后一条则可以通过不断的积累经验来调整。对于之前养成的坏习惯，一直以来都不能有效的改变。因此我尝试从书本上获得解决问题的方法，找到了一本经典的调整自我的书籍《The Road Less Traveled》，目前才开始看，但是推迟满足感这个原则，已经让我有意识的和寻求廉价满足感的自己对抗，开始调整自己的作息了。相应的我也已经开始着手做自己找完工作之后的长短期计划了，之后有时间会总结和分享自己计划的制定以及实施时遇到的问题。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/03/15/不懂这些，计算机网络你可能一无所知/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/15/不懂这些，计算机网络你可能一无所知/" itemprop="url">不懂这些，计算机网络你可能一无所知?</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-15T21:45:17+08:00">
                2019-03-15
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/youshouldknow/" itemprop="url" rel="index">
                    <span itemprop="name">youshouldknow</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>网络分层</p>
<p>| Layer       | Protocol                |<br>| ———– | ———————– |<br>| Application | Telnet, FTP, etc        |<br>| Transport   | TCP, UDP                |<br>| Network     | IP, ICMP                |<br>| Link        | drivers, interface card |</p>
</li>
<li><p>数据的单元：报文，报文段，分组/包，数据报，帧，数据单元</p>
<ul>
<li>Application Layer -&gt; 报文（message）</li>
<li>Transport Layer -&gt; TCP -&gt; 报文段（segment）</li>
<li>Transport/Network Layer -&gt; UDP/ IP -&gt; 数据报（datagram）</li>
<li>Transport/Network Layer -&gt; 分组/包（packet）</li>
<li>Link Layer -&gt; 帧（frame）</li>
</ul>
</li>
<li><p>TCP</p>
<ol>
<li><p>TCP Segment</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1g13ip2xmihj30kp072jrj.jpg" alt="img"></p>
<p>以太网数据包（frame）的大小是固定的，最初是1518字节，后来增加到1522字节。其中， 1500 字节是负载（payload），22字节是头信息（head）。</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1g13j80o5d6g30bm06qmwy.gif" alt="ip packet"></p>
<p>IP 数据包在以太网数据包的负载里面，它也有自己的头信息，最少需要20字节，所以 IP 数据包的负载最多为1480字节。</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g13j7708d2g30b708i3yb.gif" alt="tcp packet"></p>
<p>TCP 数据包在 IP 数据包的负载里面。它的头信息最少也需要20字节，因此 TCP 数据包的最大负载是 1480 - 20 = 1460 字节。由于 IP 和 TCP 协议往往有额外的头信息，所以 TCP 负载实际为1400字节左右。</p>
<p>因此，一条1500字节的信息需要两个 TCP 数据包。HTTP/2 协议的一大改进， 就是压缩 HTTP 协议的头信息，使得一个 HTTP 请求可以放在一个 TCP 数据包里面，而不是分成多个，这样就提高了速度。</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g13ivy3aetj30ix08j3yf.jpg" alt="img"></p>
</li>
<li><p>流程</p>
<ol>
<li>建立连接：三次握手</li>
<li>发送数据<ol>
<li>滑动窗口</li>
<li>慢启动</li>
</ol>
</li>
<li>断开连接：四次挥手</li>
</ol>
</li>
<li><p>优点</p>
<ul>
<li>面向连接</li>
<li>具备顺序控制</li>
<li>重发控制等机制</li>
</ul>
</li>
<li><p>应用场景</p>
<p>可以为应用提供可靠的传输。</p>
</li>
</ol>
</li>
<li><p>UDP</p>
<ol>
<li><p>UDP packet</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1g13jpm4luog30aa03a3y9.gif" alt="img"></p>
</li>
<li><p>流程</p>
</li>
<li><p>优点</p>
<blockquote>
<p>UDP数据包长度</p>
<p>在本机(loopback)传输，可以根据需要设置MTU，但记住，UDP最大理论长度65507。</p>
<p>在内网传输，最好控制在1472字节(1500-8-20)。</p>
<p>在internet上传输，最好控制在548字节(576-8-20)以内。</p>
</blockquote>
<blockquote>
<p> UDP收包能力</p>
<p>UDP处理能力非常可观，在日常的业务情形中，UDP一般不会成为性能瓶颈。</p>
<p>随着进程个数的增加，处理能力未明显上升，但是丢包个数明显下降。</p>
<p>采用多进程监听不同端口的模型，而不是多进程或多线程监听同一个端口。</p>
</blockquote>
</li>
<li><p>应用场景</p>
<p>media streaming </p>
</li>
</ol>
</li>
<li><p>IP分片与重组</p>
</li>
</ul>
<p>Reference:</p>
<blockquote>
<p><a href="https://stackoverflow.com/questions/11636405/definition-of-network-units-fragment-segment-packet-frame-datagram" target="_blank" rel="noopener">Exploring the anatomy of a data packet</a></p>
<p><a href="https://www.techrepublic.com/article/exploring-the-anatomy-of-a-data-packet/" target="_blank" rel="noopener">Definition of Network Units: Fragment, Segment, Packet, Frame, Datagram</a></p>
<p><a href="https://blog.csdn.net/github_35124642/article/details/52006185" target="_blank" rel="noopener">IP分片和重组</a></p>
<p><a href="https://www.cnblogs.com/linuxbug/p/4906000.html" target="_blank" rel="noopener">浅谈UDP(数据包长度，收包能力，丢包及进程结构选择)</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/02/19/吉他练习心得（从新手成长进阶的过程和总结）/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/19/吉他练习心得（从新手成长进阶的过程和总结）/" itemprop="url">吉他练习心得（从新手成长进阶的过程和总结）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-19T13:45:24+08:00">
                2019-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/音乐/" itemprop="url" rel="index">
                    <span itemprop="name">音乐</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/02/19/乐理知识整理（持续学习中）/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/19/乐理知识整理（持续学习中）/" itemprop="url">乐理知识整理（持续学习中）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-19T13:44:24+08:00">
                2019-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/音乐/" itemprop="url" rel="index">
                    <span itemprop="name">音乐</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="大白话音乐的基本概念"><a href="#大白话音乐的基本概念" class="headerlink" title="大白话音乐的基本概念"></a>大白话音乐的基本概念</h2><h3 id="声音的物理原理"><a href="#声音的物理原理" class="headerlink" title="声音的物理原理"></a>声音的物理原理</h3><p>声音是一种波，所以由<u>振幅，频率，相位</u></p>
<p><em>振幅</em>就是通常所说的<strong>音量(volume)</strong></p>
<p><em>频率</em>则是<strong>音高(pitch)</strong></p>
<p>波的叠加产生了不同的<strong>音色(timbre)</strong>，这里也涉及到了不同<em>相位波的叠加</em></p>
<h3 id="音乐的三要素"><a href="#音乐的三要素" class="headerlink" title="音乐的三要素"></a>音乐的三要素</h3><p>节奏，旋律，和声</p>
<p>节奏是音乐的生命</p>
<p>旋律是音乐的感情走向</p>
<p>和声是使音乐表现力更加丰富</p>
<h3 id="音高的划分—12平均律"><a href="#音高的划分—12平均律" class="headerlink" title="音高的划分—12平均律"></a>音高的划分—12平均律</h3><h3 id="音名，唱名"><a href="#音名，唱名" class="headerlink" title="音名，唱名"></a>音名，唱名</h3><h3 id="为什么划分这些唱名？"><a href="#为什么划分这些唱名？" class="headerlink" title="为什么划分这些唱名？"></a>为什么划分这些唱名？</h3><h3 id="和弦"><a href="#和弦" class="headerlink" title="和弦"></a>和弦</h3><h3 id="常用和弦进行"><a href="#常用和弦进行" class="headerlink" title="常用和弦进行"></a>常用和弦进行</h3><h3 id="什么是调？C调，D调，XX调到底是啥"><a href="#什么是调？C调，D调，XX调到底是啥" class="headerlink" title="什么是调？C调，D调，XX调到底是啥"></a>什么是调？C调，D调，XX调到底是啥</h3><h2 id="识谱，不要做文盲！"><a href="#识谱，不要做文盲！" class="headerlink" title="识谱，不要做文盲！"></a>识谱，不要做文盲！</h2><h3 id="五线谱：音乐的语言"><a href="#五线谱：音乐的语言" class="headerlink" title="五线谱：音乐的语言"></a>五线谱：音乐的语言</h3><h3 id="六线谱：万一按错了呢，还是要这个纠正下"><a href="#六线谱：万一按错了呢，还是要这个纠正下" class="headerlink" title="六线谱：万一按错了呢，还是要这个纠正下"></a>六线谱：万一按错了呢，还是要这个纠正下</h3><h2 id="练琴心得"><a href="#练琴心得" class="headerlink" title="练琴心得"></a>练琴心得</h2><h3 id="关于爬格子"><a href="#关于爬格子" class="headerlink" title="关于爬格子"></a>关于爬格子</h3><p>必要性：顶尖的大师，每天也都会爬格子，何况吾等。能够让你的手指灵活，有力，独立。</p>
<p>推荐爬格子方法：从60开始，声音饱满节奏稳定以后提速5，正常爬格子速度一般练到100+ ，保留指爬格子一般练到80速左右。 节拍使用四四拍，四分音符，每个音符弹两下。</p>
<p>爬格子注意：一定要集中注意力爬格子！！一定要集中注意力爬格子！！一定要集中注意力爬格子！！不要以为这是机械的动作就不要注意力了，集中注意，打开手指，努力张开到最大，按的最接近品柱。不然爬格子并不会带来上述收益。</p>
<p>对了，很努力的爬格子之后，再按和弦会感觉手指很灵活，很轻松。和健身做完大重量做小重量类似的感觉。</p>
<h3 id="关于单音练习"><a href="#关于单音练习" class="headerlink" title="关于单音练习"></a>关于单音练习</h3><p>在谈的时候，放空大脑，感受指尖的飞舞，啊～Stop！单音练习一定要把谈的音唱出来，这样才能增加音名和指板位置的map的熟悉度。最后可以做到<strong>视谱</strong>就靠这个了。</p>
<h2 id="小机灵鬼的问题"><a href="#小机灵鬼的问题" class="headerlink" title="小机灵鬼的问题"></a>小机灵鬼的问题</h2><ol>
<li><p>音色是什么？</p>
<p>谐波</p>
</li>
<li><p>为什么有的分解和弦，最后的音会变成空弦？</p>
<p>因为吉他手为了转换和弦的方便，提前移走了。由于不是根音（音乐的创作原理），影响不是很大就可以接受，而且可能会有意想不到的效果哦。</p>
</li>
<li><p>为什么要学习不同的调的指法呢，变调夹不是能解决一切么？</p>
<p>变调夹虽然很厉害，让你只会C调的指法（音阶在指板上的位置熟悉），却可以弹其他调。但是！！如果一首歌有好几个调呢，难道你要快速移动变调夹吗HH。所以不要偷懒机灵鬼们。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/02/19/健身理论OverView/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/19/健身理论OverView/" itemprop="url">健身理论OverView</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-19T13:42:24+08:00">
                2019-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/健身/" itemprop="url" rel="index">
                    <span itemprop="name">健身</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/02/19/2018-11-inch-ipad-pro/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/19/2018-11-inch-ipad-pro/" itemprop="url">2018 11 inch ipad pro</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-19T13:37:57+08:00">
                2019-02-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/tech-experiment/" itemprop="url" rel="index">
                    <span itemprop="name">tech experiment</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/01/13/protocol-buffers/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/13/protocol-buffers/" itemprop="url">protocol buffers</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-13T03:54:44+08:00">
                2019-01-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index">
                    <span itemprop="name">tools</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本教程旨在让我们学会：</p>
<ol>
<li>定义一个.proto文件</li>
<li>使用 protocol buffer complier</li>
<li>用户 Java protocol buffer API 来读写信息</li>
</ol>
<h4 id="首先我们结合实际的应用场景来了解一下，为什么需要protocol-buffers"><a href="#首先我们结合实际的应用场景来了解一下，为什么需要protocol-buffers" class="headerlink" title="首先我们结合实际的应用场景来了解一下，为什么需要protocol buffers?"></a>首先我们结合实际的应用场景来了解一下，为什么需要protocol buffers?</h4><p>这里我们是用一个通讯录对文件的读写来完成对用户通讯信息的读写的例子作为介绍。</p>
<p>当我们要序列化和以及恢复这种有结构的数据，有如下几种方法。</p>
<ul>
<li>利用Java的序列化机制。但是存在如下问题：<ul>
<li>存在许多众所周知的问题 (see Effective Java, by Josh Bloch pp. 213)</li>
<li>不能很好地和其他语言C++/Python共享数据（和语言的耦合性太高）</li>
</ul>
</li>
<li>自定义一个特定的（ad-hoc）方式把数据项编码成一个字符串。比如将四个整数编码为”12:3:-23:67”。这是一种简单而灵活的方法，尽管它需要编写一次性（这里的英文是one-off, 意思为happen only once，我理解是只适用于这个场景的解码和编码方法，因此翻译为一次性的）的编码和解码的代码，而且解码会产生很小的运行时间成本。所以这种方式很适合编码简单的数据。</li>
<li>将数据序列化为XML。 这种方法可能非常有吸引力，因为XML是可读的，并且有许多语言的绑定库。 如果您想与其他应用程序/项目共享数据，这可能是一个不错的选择。 然而，XML是众所周知的空间密集型，<u>编码/解码可能会给应用程序带来巨大的性能损失</u>。 另外，导航XML DOM树比导航类中的简单字段通常要复杂得多。</li>
</ul>
<p>Protocol buffers是解决这个问题的灵活，高效的自动化解决方案。</p>
<p>你只需要写一个你想要存储的数据结构的描述.proto文件。之后protocol buffer compiler会创建一个类。这个类</p>
<ol>
<li>用高效的二进制格式实现了自动编码和解码。</li>
<li>对字段提供了getters和setters。</li>
<li>将读写的细节作为一个单元处理</li>
<li>支持拓展格式，并且保持对旧的编码的数据读取的兼容。</li>
</ol>
<h4 id="下面介绍具体的使用："><a href="#下面介绍具体的使用：" class="headerlink" title="下面介绍具体的使用："></a>下面介绍具体的使用：</h4><ul>
<li><p>定义.proto文件的方式</p>
<ul>
<li>Extend info<ul>
<li>package（区分不同project）</li>
<li>java_package（java的包, default=package）</li>
<li>java_outer_classname（java的类名, default=filename2camelcase）</li>
</ul>
</li>
<li>Massage declaration<ul>
<li>field types(default value): bool(false), int32(0), float(0), double(0), string(“”)</li>
<li>enum定义</li>
<li>tag: field在二进制编码中使用的标记。所以1-15（需要少于一个字节）一般赋予常用的和repeated的元素。&gt;=16的给一些不常使用的optional元素。</li>
<li>modifiers: required(少用，对拓展限制很强), optional, repeated</li>
</ul>
</li>
</ul>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">syntax = <span class="string">"proto2"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> tutorial;</span><br><span class="line"></span><br><span class="line"><span class="keyword">option</span> java_package = <span class="string">"com.example.tutorial"</span>;</span><br><span class="line"><span class="keyword">option</span> java_outer_classname = <span class="string">"AddressBookProtos"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">required</span> <span class="built_in">string</span> name = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">required</span> <span class="built_in">int32</span> id = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">optional</span> <span class="built_in">string</span> email = <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">enum</span> <span class="title">PhoneType</span> </span>&#123;</span><br><span class="line">    MOBILE = <span class="number">0</span>;</span><br><span class="line">    HOME = <span class="number">1</span>;</span><br><span class="line">    WORK = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">message</span> <span class="title">PhoneNumber</span> </span>&#123;</span><br><span class="line">    <span class="keyword">required</span> <span class="built_in">string</span> number = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">optional</span> PhoneType type = <span class="number">2</span> [default = HOME];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">repeated</span> PhoneNumber phones = <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">message</span> <span class="title">AddressBook</span> </span>&#123;</span><br><span class="line">  <span class="keyword">repeated</span> Person people = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>编译该文件(-I用于import)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protoc -I=$SRC_DIR --java_out=$DST_DIR $SRC_DIR/addressbook.proto</span><br></pre></td></tr></table></figure>
</li>
<li><p>生成的Class文件如何使用（生成了什么，提供了什么功能）</p>
<ul>
<li><p>生成了Message对应的class。每个class有自己的Builder。且由protocol compiler生成的类都是对应JAVA风格的驼峰命名。<u>这里建议在.proto文件中使用小写字母+下划线</u>。（因为protocol compiler是在小写字母+下划线规范上，解析生成对应语言的风格的代码）</p>
</li>
<li><p>Message: 信息对象，immutable，不可被修改</p>
<ul>
<li>Singular field: has, get</li>
<li>Repeated fields: getList, getCount, get(index)</li>
<li>标准方法，Message接口声明的<ul>
<li>isInitialized(): checks if all the required fields have been set.</li>
<li>toString(): returns a human-readable representation of the message, particularly useful for debugging</li>
</ul>
</li>
<li>序列化和解码<ul>
<li>byte[] toByteArray();: serializes the message and returns a byte array containing its raw bytes.</li>
<li>static Person parseFrom(byte[] data);: parses a message from the given byte array.</li>
<li>void writeTo(OutputStream output);: serializes the message and writes it to an OutputStream.</li>
<li>static Person parseFrom(InputStream input);: reads and parses a message from an InputStream.</li>
</ul>
</li>
</ul>
</li>
<li><p>Builder: 信息对象的构造器，用来创建massage对象</p>
<ul>
<li>Singular field: has, get, set, clear</li>
<li>Repeated fields: getList, getCount, get(index), set(index, value), add(value), addAll(value), clear</li>
<li>标准方法，Message.Builder接口声明的<ul>
<li>isInitialized()</li>
<li>toString()</li>
<li>mergeFrom(Message other):  merges the contents of other into this message, overwriting singular scalar fields, merging composite fields, and concatenating repeated fields</li>
<li>clear(): clears all the fields back to the empty state</li>
</ul>
</li>
</ul>
</li>
<li><p>Enums and Nested Classes:</p>
<p>枚举类型会自动在声明的类的内部生成</p>
</li>
</ul>
<blockquote>
<p>由于协议缓冲区类基本上是哑数据持有者（如C中的strcuts），所以注意这里要拓展数据类的功能，比如添加一些行为，不可以通过继承的方式，因为这将打破protocol buffer内部的机制。可以通过包装(wrap)数据类到特定于应用程序的类中。（适配器模式）</p>
</blockquote>
</li>
<li><p>尝试写入文件</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.example.tutorial.AddressBookProtos.AddressBook;</span><br><span class="line"><span class="keyword">import</span> com.example.tutorial.AddressBookProtos.Person;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddPerson</span> </span>&#123;</span><br><span class="line">  <span class="comment">// This function fills in a Person message based on user input.</span></span><br><span class="line">  <span class="function"><span class="keyword">static</span> Person <span class="title">PromptForAddress</span><span class="params">(BufferedReader stdin,</span></span></span><br><span class="line"><span class="function"><span class="params">                                 PrintStream stdout)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    Person.Builder person = Person.newBuilder();</span><br><span class="line"></span><br><span class="line">    stdout.print(<span class="string">"Enter person ID: "</span>);</span><br><span class="line">    person.setId(Integer.valueOf(stdin.readLine()));</span><br><span class="line"></span><br><span class="line">    stdout.print(<span class="string">"Enter name: "</span>);</span><br><span class="line">    person.setName(stdin.readLine());</span><br><span class="line"></span><br><span class="line">    stdout.print(<span class="string">"Enter email address (blank for none): "</span>);</span><br><span class="line">    String email = stdin.readLine();</span><br><span class="line">    <span class="keyword">if</span> (email.length() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      person.setEmail(email);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">      stdout.print(<span class="string">"Enter a phone number (or leave blank to finish): "</span>);</span><br><span class="line">      String number = stdin.readLine();</span><br><span class="line">      <span class="keyword">if</span> (number.length() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      Person.PhoneNumber.Builder phoneNumber =</span><br><span class="line">        Person.PhoneNumber.newBuilder().setNumber(number);</span><br><span class="line"></span><br><span class="line">      stdout.print(<span class="string">"Is this a mobile, home, or work phone? "</span>);</span><br><span class="line">      String type = stdin.readLine();</span><br><span class="line">      <span class="keyword">if</span> (type.equals(<span class="string">"mobile"</span>)) &#123;</span><br><span class="line">        phoneNumber.setType(Person.PhoneType.MOBILE);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">"home"</span>)) &#123;</span><br><span class="line">        phoneNumber.setType(Person.PhoneType.HOME);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type.equals(<span class="string">"work"</span>)) &#123;</span><br><span class="line">        phoneNumber.setType(Person.PhoneType.WORK);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        stdout.println(<span class="string">"Unknown phone type.  Using default."</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      person.addPhones(phoneNumber);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> person.build();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Main function:  Reads the entire address book from a file,</span></span><br><span class="line">  <span class="comment">//   adds one person based on user input, then writes it back out to the same</span></span><br><span class="line">  <span class="comment">//   file.</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (args.length != <span class="number">1</span>) &#123;</span><br><span class="line">      System.err.println(<span class="string">"Usage:  AddPerson ADDRESS_BOOK_FILE"</span>);</span><br><span class="line">      System.exit(-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    AddressBook.Builder addressBook = AddressBook.newBuilder();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read the existing address book.</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      addressBook.mergeFrom(<span class="keyword">new</span> FileInputStream(args[<span class="number">0</span>]));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">      System.out.println(args[<span class="number">0</span>] + <span class="string">": File not found.  Creating a new file."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Add an address.</span></span><br><span class="line">    addressBook.addPeople(</span><br><span class="line">      PromptForAddress(<span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in)),</span><br><span class="line">                       System.out));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Write the new address book back to disk.</span></span><br><span class="line">    FileOutputStream output = <span class="keyword">new</span> FileOutputStream(args[<span class="number">0</span>]);</span><br><span class="line">    addressBook.build().writeTo(output);</span><br><span class="line">    output.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>尝试读取文件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.example.tutorial.AddressBookProtos.AddressBook;</span><br><span class="line"><span class="keyword">import</span> com.example.tutorial.AddressBookProtos.Person;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListPeople</span> </span>&#123;</span><br><span class="line">  <span class="comment">// Iterates though all people in the AddressBook and prints info about them.</span></span><br><span class="line">  <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Print</span><span class="params">(AddressBook addressBook)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Person person: addressBook.getPeopleList()) &#123;</span><br><span class="line">      System.out.println(<span class="string">"Person ID: "</span> + person.getId());</span><br><span class="line">      System.out.println(<span class="string">"  Name: "</span> + person.getName());</span><br><span class="line">      <span class="keyword">if</span> (person.hasEmail()) &#123;</span><br><span class="line">        System.out.println(<span class="string">"  E-mail address: "</span> + person.getEmail());</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (Person.PhoneNumber phoneNumber : person.getPhonesList()) &#123;</span><br><span class="line">        <span class="keyword">switch</span> (phoneNumber.getType()) &#123;</span><br><span class="line">          <span class="keyword">case</span> MOBILE:</span><br><span class="line">            System.out.print(<span class="string">"  Mobile phone #: "</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> HOME:</span><br><span class="line">            System.out.print(<span class="string">"  Home phone #: "</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> WORK:</span><br><span class="line">            System.out.print(<span class="string">"  Work phone #: "</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(phoneNumber.getNumber());</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Main function:  Reads the entire address book from a file and prints all</span></span><br><span class="line">  <span class="comment">//   the information inside.</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (args.length != <span class="number">1</span>) &#123;</span><br><span class="line">      System.err.println(<span class="string">"Usage:  ListPeople ADDRESS_BOOK_FILE"</span>);</span><br><span class="line">      System.exit(-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read the existing address book.</span></span><br><span class="line">    AddressBook addressBook =</span><br><span class="line">      AddressBook.parseFrom(<span class="keyword">new</span> FileInputStream(args[<span class="number">0</span>]));</span><br><span class="line"></span><br><span class="line">    Print(addressBook);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>如何拓展一个protocol buffer（新buffers向下兼容，旧buffers向上兼容）(<u><strong>考虑的是新旧代码上的兼容</strong></u>)</p>
<ul>
<li>you <em>must not</em> change the tag numbers of any existing fields.</li>
<li>you <em>must not</em> add or delete any required fields.</li>
<li>you <em>may</em> delete optional or repeated fields.</li>
<li>you <em>may</em> add new optional or repeated fields but you must use fresh tag numbers (i.e. tag numbers that were never used in this protocol buffer, not even by deleted fields).</li>
</ul>
<p>对于删除的可选字段</p>
<ul>
<li>读取新的文件时，旧代码设置为默认值，如果没有默认值，则是对应类型的默认值。重复字段为空。</li>
<li>读取旧的文件时，新代码会透明读取，即忽略被删除的字段。</li>
</ul>
<p>对于新增的可选字段</p>
<ul>
<li>读取新的文件时，旧代码会透明读取，即忽略被删除的字段。</li>
<li>读取旧的文件时，新代码设置为默认值，如果没有默认值，则是对应类型的默认值。重复字段为空。</li>
</ul>
</li>
<li><p>高级应用（反射）【以下为google翻译】</p>
<p>协议消息类提供的一个关键特性是反射。 您可以迭代消息的字段并操作它们的值，而无需针对任何特定消息类型编写代码。 使用反射的一个非常有用的方法是将协议消息转换为其他编码（例如XML或JSON）以及从其他编码转换。 更高级的反射使用可能是找到两个相同类型的消息之间的差异，或者开发一种“协议消息的正则表达式”，在其中可以编写匹配特定消息内容的表达式。 如果您使用自己的想象力，可以将Protocol Buffers应用于比您最初期望的更广泛的问题！</p>
</li>
</ul>
<h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><p>本质上就是提供了一个中间层，完成数据的定义和数据在具体代码中实现（提供的API：getset，序列化，解码编码，builder-merge等）的解耦。</p>
<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><p><a href="https://developers.google.com/protocol-buffers/docs/javatutorial" target="_blank" rel="noopener">protocol buffers java tutorial</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blog.youshouldknow.tech/2019/01/13/some-exprience-about-hexo-first-use-it/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Frank Zhang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/zy_avatar.jepg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="YouShouldKnow">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/13/some-exprience-about-hexo-first-use-it/" itemprop="url">hexo</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-13T02:23:02+08:00">
                2019-01-13
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/tools/" itemprop="url" rel="index">
                    <span itemprop="name">tools</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/zy_avatar.jepg" alt="Frank Zhang">
          <p class="site-author-name" itemprop="name">Frank Zhang</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/pilife" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/zhang-yi-14-85-5/activities" target="_blank" title="ZhiHu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      ZhiHu
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy;  2019 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Frank Zhang</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  

</body>
</html>
